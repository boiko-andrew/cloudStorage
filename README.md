# Дипломная работа “Облачное хранилище”  

В дипломной работе разработан REST-сервис, который предоставляет REST-интерфейс для загрузки файлов и вывода списка уже загруженных файлов пользователя.  

## Описание конечных точек и методов  

REST-интерфейс содержит 4 конечные точки (endpoints):  
  * /login - используется для авторизации пользователя в приложении,  
  * /logout - используется для выхода пользователя из приложения,  
  * /file - используется для добавления файла, а также для переименовывания, удаления и скачивания уже добавленного файла,  
  * /list - используется для получения списка файлов, которые уже добавлены в облачное хранилище.  

В конечных точках "/login" и "/logout" реализован метод POST, в конечной точке "/list" реализован метод GET. В конечной точке "/file" реализовано 4 метода:  
  * метод POST - для добавления файла,  
  * метод PUT - для переименовывания файла,  
  * метод DELETE - для удаления файла,  
  * метод GET - для скачивания файла.  

## Описание авторизации  

Для получения токена пользователя необходимо перейти в конечную точку "/login" и с помощью метода POST в теле запроса передать логин и пароль текущего пользователя. Если логин и пароль совпадут с логином и паролем, которые сохранены в базе данных (БД), то пользователю будет назначен токен, который будет действителен до тех пор, пока пользователь не выйдет из приложения с использованием конечной точки "/logout".  
Все последующие операции с файлами должны выполняться с использованием полученного токена.  
При каждом следующем входе в приложение токен пользователя будет обновляться, на постоянной основе в БД токен не сохраняется.  

## Описание хранения данных  

Для хранения данных о пользователях и их файлах используется СУБД PostgreSQL. Данные о пользователях сохраняются в таблице Users, файлы пользователей - в таблице Files. Таблица Users связана с таблицей Files отношением "один-ко-многим" (у каждого пользователя в облачном хранилище может быть сохранено несколько файлов).  
Для хранения токенов пользователей использована структура данных Map. Токены пользователей сохраняются только во время работы программы.  

## Особенности реализации  

  * разработка выполнялась в операционной системе (ОС) Microsoft Windows 10 Домашняя (v. 22H2),  
  * для разработки использовалась IDE IntelliJ IDEA 2023.3.4 (Community Edition),  
  * использован SDK Amazon Corretto (v. 11.0.18),  
  * для контейнеризации приложения использовался Docker (v. 4.26.1 (131620)),
  * unit-тесты написаны с использованием mockito,
  * интеграционные тесты написаны с использованием testcontainers,
  * для тестирования приложения использованы Postman (v. 10.24), а также предоставленная реализация графического интерфейса пользователя на базе Vue.js.  

Для работы приложения организовано 2 контейнера:  
  * контейнер db - для работы с БД с использованием СУБД PostgreSQL (основан на образе postgres:15-alpine), порт 5432,   
  * контейнер server - для предоставления REST-интерфейса (основан на образе cloudstorage-server, который формируется при выполнении команды docker build), порт 8082:8081.  

Для настройки процесса запуска контейнеров использован файл docker-compose.yml.

## Описание данных для аутентификации  

Предварительно в БД сохранены следующие пары "логин - пароль":  
  * admin@mail.ru - admin_password,  
  * developer@mail.ru - developer_password,
  * user@mail.ru - user_password.